<!Doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font: 13px Helvetica, Arial; background: #fafafa;}
      #messageInput{ background: #000; padding: 3px;}
      form input { border: 0; padding: 10px; width: 90%; margin-right: .5%; }
      form button { width: 9%; background: rgb(130, 224, 255); border: none; padding: 10px; }
      #messages { list-style-type: none; margin: 0; padding: 0; }
      #messages li { padding: 5px 10px; }
      #messages li:nth-child(odd) { background: #eee; }
	  #regOverlay {
		position: fixed;
		width: 100%;
		height:100%;
		text-align:center;
	  }
	  
	  #regInput {
		  -webkit-transition: all 0.30s ease-in-out;
		  -moz-transition: all 0.30s ease-in-out;
		  -ms-transition: all 0.30s ease-in-out;
		  -o-transition: all 0.30s ease-in-out;
		  outline: none;
		    border-radius:5px;
			border: 4px solid rgba(81, 203, 238, 1);  
			padding:25px;
	  }
	  
	  #regInput:focus {
		box-shadow: 0 0 9px rgba(81, 203, 238, 1);
  border: 7px solid rgba(81, 203, 238, 1);  
  padding:22px;
  border-radius:10px;
	  }
	  
	  #glue {
	  position: fixed;
	  bottom: 0; 
	  width: 100%; 
	  filter:blur(4px);
	  }
	  
	  #scrollContent {
		filter: blur(4px)
	  }
	  
	  #container {
		position:relative;
	  }
	  
	  #regLabel {
		position:absolute;
		bottom:100%;
		width:100%;
		text-align:center;
		font-size:48pt;
	  }
    </style>
  </head>
<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script>
  $(function () {
    var socket = io();
	
	$('#registration').submit(function(){
      socket.emit('registration', $('#regInput').val());
      return false;
    });
	
	socket.on('registrationStatus', function(obj){
      console.log(obj);
	  if(obj.success) {
		$('#regOverlay').css("display", "none");
		$('#glue, #scrollContent').css("filter", "none");
	  }
    });
	
    $('#messageInput').submit(function(){
      socket.emit('chat message', $('#m').val());
      return false;
    });
    socket.on('chat message', function(msg) {
      $('#messages').append($('<li>').text(msg));
    });
  });
</script>
<body>
<table id="regOverlay" style="width: 100%;">
  <tr>
     <td style="text-align: center; vertical-align: middle;">
		<div id="container">
			<form id="registration">
				<input id="regInput" type="text">
			</form>
			<div id="regLabel">enter username</div>
		</div>
     </td>
  </tr>
</table>

	<div id="glue">
		<form id="messageInput" action="">
		  <input id="m" autocomplete="off" /><button>Send</button>
		</form>
	</div>
	<div id="scrollContent">
		<ul id="messages"></ul>
   </div>
</body>
</html>
