<!--
Contributors: Gabriel Dimitrov, Julian Leuze
-->

<!Doctype html>
<html>
<head>
<title>Socket.IO chat</title>
<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<link rel="stylesheet"
	href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="socket.io-stream.js"></script>
<script src='client.js'></script>
<link rel='stylesheet' href='index.css'>
</head>
<body>
	<div id="blurry">
		<div id="tabs">
			<span id="left">
				<ul id="contacts">
					<!-- When using multiple lists extending the widget from widget factory is necessary -->
					<li><a href="#tabs-1">Global</a></li>
				</ul>
			</span> <span id="chatBody">

				<div id="tabs-1">
					<ul id="messages"></ul>
				</div>
		<input type="file" id="fileElem" multiple accept="*/*" onchange="handleFilesGlobal(this.files[0])">
			<div id="dropOverlay">
				<div id="dropHere">Drop Files Here</div>
			</div>
			</span>
		</div>
		<span id="chatInput">
			<form id="messageInput" action="">
				<input id="m" autocomplete="off" />
				<button>Send</button>
			</form>
		</span>
	</div>

	<div id="overlay">I'm Overlay</div>
	<table id="regOverlay">
		<tr>
			<td style="text-align: center; vertical-align: middle;">
				<!-- REGISTRATION -->
				<div id="container" class="container">
					<form id="registration" action="">
						<!--pattern in pattern atrribute is automatically anchored-->
						<input id="regInput" class="regField" type="text" placeholder="Enter username" pattern="\w+" required>
						<!-- Pattern requires the user to enter a password that contains at least
							 one uppercase,
							 one lowercase,
							 one digit
							 and one special character.
							 Password must be at least 8 characters long
						-->
						<input id="passwd" class="regField" type="password" placeholder="Enter password" pattern="(?:(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*\W)).{8,}" required>
						<div style="width:90%;margin: auto;text-align: left;">
							<img src="profile-256.jpg" style="float: left;">
							<div>
								<span>Upload profile picture</span>
								<input type="file">
								<!-- type has to be button else it is treated as submit button -->
								<button id="captureWebcam" type="button">Capture from webcam</button>
							</div>
						</div>
						<!-- A submit button is required when there's more than one input????-->
						<input id="submitBtn" type="submit" value="submit" style="display: none;">
					</form>
					<div id="regLabel">Registration</div>
					<div id="lower" style="clear:left;">
						<a href="javascript:void(0)" id="toLogin" class="pseudoLink">Already registered? Click here to get to the login screen</a>
						<div id='errorMessage'></div>
					</div>
				</div>
				<!-- LOGIN -->
				<div id="loginContainer" class="container" style="display:none;">
					<form id="registration" action="">
						<!--pattern in pattern atrribute is automatically anchored-->
						<input id="regInput" class="regField" type="text" placeholder="Enter username" pattern="\w+" required>
						<!-- Pattern requires the user to enter a password that contains at least
							 one uppercase,
							 one lowercase,
							 one digit
							 and one special character.
							 Password must be at least 8 characters long
						-->
						<input id="passwd" class="regField" type="password" placeholder="Enter password" pattern="(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\W).{8,}" required>
						<!-- A submit button is required when there's more than one input????-->
						<input id="submitBtn" type="submit" value="submit">
					</form>
					<div id="regLabel">Login</div>
					<div id='errorMessage'></div>
					<a href="javascript:void(0)" id="toRegistration" class="pseudoLink">Not registered yet? Click here to get to the registration screen</a>
				</div>
			</td>
		</tr>
	</table>
	<div id="videoOverlay" style="display:none; position: fixed; width: 100%; height:100%; z-index:1000; top: 0">
		<div style="margin:auto; text-align:center;">
			<video autoplay="true" id="webcamPreview" style="display: block; margin: auto;"></video>
			<button>take snap</button>
			<button>Stop</button>
		</div>
	</div>
</body>
</html>
